{"version":3,"sources":["src/react/createElement.js","src/react/component.js","src/react/index.js","src/react-dom/dom.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["createElement","tag","attrs","children","Component","props","isReactComponent","state","stateChange","Object","assign","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","textNode","document","createTextNode","component","createComponent","setComponentProps","base","keys","forEach","key","child","inst","prototype","renderer","container","appendChild","Counter","React","element","Date","toLocaleTimeString","ReactDOM","getElementById"],"mappings":"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","file":"src.277d7539.map","sourceRoot":"..","sourcesContent":["function createElement(tag, attrs, ...children) {\n  return {\n    tag,\n    attrs,\n    children\n  }\n}\nexport default createElement;","class Component {\n  constructor(props = {}) {//ES6:给props参数赋一个默认值\n    this.isReactComponent = true;\n    this.state = {};\n    this.props = props;\n  }\n  setState (stateChange) {\n    Object.assign(this.state, stateChange);//合并stateChange与this.state\n  }\n}\n\nexport default Component;","import createElement from './createElement.js';\nimport Component from './component.js'\nexport default {\n  Component,\n  createElement\n}","export function setAttribute(dom, name, value) {\n  if(name === 'className')  name = 'class';\n  if(/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n  }else if (name === 'style') {\n    // {{fontSize:}}\n    if(!value || typeof value === 'string') {\n      dom.style.cssText = value || '';\n    }else if(value && typeof value === 'object') {\n      for(let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value + 'px' : value[name];\n      }\n    }\n  }else {\n    if(value) {\n      dom.setAttribute(name, value);\n    } else {\n      dom.removeAttribute(name, value);\n    }\n  }\n}","import { setAttribute } from './dom';\nfunction _render (vnode) {\n  if (typeof vnode === 'string') {\n    const textNode = document.createTextNode(vnode);\n    return textNode\n  }\n\n  //组件本质上也是一个函数\nif(typeof vnode.tag === 'function') {\n  // 在jsx 标签<Counter />\n  // 普通标签就会来到_render，_render()方法处理普通标签的转化\n  //不是普通标签，就来到\"function\"，-》 来到组件(因为组件本质上也是一个函数)\n  const component = createComponent(vnode.tag, vnode.attrs);\n  setComponentProps(component, vnode.attrs);\n  // console.log(vnode);\n  return component.base;\n}\n\n  const dom = document.createElement(vnode.tag);\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n      //不是简单的setAttribute 而是 onClick className {obj}\n      setAttribute(dom, key, value);\n    });\n  }\n  vnode.children.forEach(child =>  render(child, dom));\n  return dom;\n}\n\nfunction createComponent (component, props) {\n  let inst;\n  if(component.prototype && component.prototype.render) {\n    inst = new component(props);\n  }\n  return inst;\n}\nfunction setComponentProps(component, props) {\n  renderComponent(component);//渲染组件\n}\nexport function renderComponent(component) {\n  // 实现组件显示\n  let base;\n  const renderer = component.render();//调用组件上的render方法\n  base = _render(renderer);//复用_render（）方法，将jsx转变为真实的DOM\n  component.base = base;\n}\n\nexport function render (vnode, container) {\n  return container.appendChild(_render(vnode));\n}","import { render } from './render';\n\nexport default {\n  render\n}","import React from './react';\nimport ReactDOM from './react-dom';\n\nclass Counter extends React.Component {\n  constructor (props) {\n    super(props);//该句代码的作用是将父类(Component)构造函数重新执行一遍，由此拿到(继承)该父类组件内部所有的属性及方法\n  }\n  render () {\n    return (\n      <div>\n        Counter\n      </div>\n    )\n  }\n}\n\nconst element = (\n  <div>\n    <h1>Hello, World!</h1>\n    <Counter />\n    <Counter />\n    <h2>It is { new Date().toLocaleTimeString()}.</h2>\n  </div>\n);\nReactDOM.render(\n  element,\n  document.getElementById('root')\n)\n\n\n// setInterval(tick, 1000);"]}